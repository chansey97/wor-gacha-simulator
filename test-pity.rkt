#lang racket
(require threading)
(require racket/class)
(require "./structs.rkt")
(require "./utils.rkt")
(require "./spirits-pool.rkt")
(require "./limited-spirits-pool.rkt")
(require "./surprise-spirits-pool.rkt")
(require "./ancient-pool.rkt")
(require "./divine-pool.rkt")
(require "./rarities.rkt")

(define (create-pools is-soft-pity-on)
  (define spirits-shared-pity (box 0))  ; 英灵系共享保底
  (define ancient-shared-pity (box 0)) ; 远古系共享保底
  (define divine-shared-pity (box 0))  ; 神圣系共享保底

  ;; 普通英灵召唤
  (define normal-spirits-rarities spirits-rarities)
  (define normal-spirits-pool-name "普通英灵召唤")
  (define normal-spirits-pool
    (new spirits-pool%
         [name normal-spirits-pool-name]
         [shared-pity spirits-shared-pity]
         [rarities normal-spirits-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  ;; 特定英灵召唤
  (define special-spirits-up-heroes-5-stars-lord '())
  (define special-spirits-up-heroes-5-stars '("康斯坦丝" "卡利普索"))
  (define special-spirits-up-heroes-4-stars '("艾斯米" "塞蕾妮" "奥西伦"))
  (define special-spirits-rarities
    (~> (foldl (λ (hero rs) (add-hero rs hero 5 #t 14)) spirits-rarities special-spirits-up-heroes-5-stars-lord)
        (foldl (λ (hero rs) (add-hero rs hero 5 #f 14)) _ special-spirits-up-heroes-5-stars)
        (foldl (λ (hero rs) (add-hero rs hero 4 #f 14)) _ special-spirits-up-heroes-4-stars)))
  (define special-spirits-pool-name "特定英灵召唤")
  (define special-spirits-pool
    (new spirits-pool%
         [name special-spirits-pool-name]
         [shared-pity spirits-shared-pity]
         [rarities special-spirits-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  ;; 限定英灵召唤
  (define limited-spirits-up-hero-5-stars "貂蝉")
  (define limited-spirits-rarities
    (add-hero spirits-rarities limited-spirits-up-hero-5-stars 5 #f 15))
  (define limited-spirits-pool-name "限定英灵召唤")
  (define limited-spirits-pool
    (new limited-spirits-pool%
         [name limited-spirits-pool-name]
         [shared-pity spirits-shared-pity]
         [rarities limited-spirits-rarities]
         [is-soft-pity-on is-soft-pity-on]
         [up-hero limited-spirits-up-hero-5-stars]))

  ;; 狂欢英灵召唤
  (define crazy-spirits-rarities
    (make-spirits-crazy spirits-rarities))
  (define crazy-spirits-pool-name "狂欢英灵召唤")
  (define crazy-spirits-pool
    (new spirits-pool%
         [name crazy-spirits-pool-name]
         [shared-pity spirits-shared-pity]
         [rarities crazy-spirits-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  ;; 惊喜英灵召唤
  (define surprise-spirits-rarities spirits-rarities)
  (define surprise-spirits-pool-name "惊喜英灵召唤")
  (define surprise-spirits-pool
    (new surprise-spirits-pool%
         [name surprise-spirits-pool-name]
         [shared-pity spirits-shared-pity]
         [rarities surprise-spirits-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  ;; 普通远古召唤
  (define normal-ancient-rarities ancient-rarities)
  (define normal-ancient-pool-name "普通远古召唤")
  (define normal-ancient-pool
    (new ancient-pool%
         [name normal-ancient-pool-name]
         [shared-pity ancient-shared-pity]
         [rarities normal-ancient-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  ;; 特定远古召唤
  (define special-ancient-up-heroes-5-stars-lord '("居鲁士"))
  (define special-ancient-up-heroes-5-stars '("吕布"))
  (define special-ancient-rarities
    (~> (foldl (λ (hero rs) (add-hero rs hero 5 #t 14)) ancient-rarities special-ancient-up-heroes-5-stars-lord)
        (foldl (λ (hero rs) (add-hero rs hero 5 #f 14)) _                special-ancient-up-heroes-5-stars)))
  (define special-ancient-pool-name "特定远古召唤")
  (define special-ancient-pool
    (new ancient-pool%
         [name special-ancient-pool-name]
         [shared-pity ancient-shared-pity]
         [rarities special-ancient-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  ;; 普通神圣召唤
  (define normal-divine-rarities divine-rarities)
  (define normal-divine-pool-name "普通神圣召唤")
  (define normal-divine-pool
    (new divine-pool%
         [name normal-divine-pool-name]
         [shared-pity divine-shared-pity]
         [rarities normal-divine-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  ;; 特定神圣召唤
  (define special-divine-up-heroes-5-stars-lord '())
  (define special-divine-up-heroes-5-stars '("康斯坦丝" "卡利普索"))
  (define special-divine-up-heroes-4-stars '("艾斯米" "塞蕾妮" "奥西伦"))
  (define special-divine-rarities
    (~> (foldl (λ (hero rs) (add-hero rs hero 5 #t 14)) divine-rarities special-divine-up-heroes-5-stars-lord)
        (foldl (λ (hero rs) (add-hero rs hero 5 #f 14)) _ special-divine-up-heroes-5-stars)
        (foldl (λ (hero rs) (add-hero rs hero 4 #f 14)) _ special-divine-up-heroes-4-stars)))
  (define special-divine-pool-name "特定神圣召唤")
  (define special-divine-pool
    (new divine-pool%
         [name special-divine-pool-name]
         [shared-pity divine-shared-pity]
         [rarities special-divine-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  ;; 狂欢神圣召唤
  (define crazy-divine-rarities
    (make-divine-crazy divine-rarities))
  (define crazy-divine-pool-name "狂欢神圣召唤")
  (define crazy-divine-pool
    (new divine-pool%
         [name crazy-divine-pool-name]
         [shared-pity divine-shared-pity]
         [rarities crazy-divine-rarities]
         [is-soft-pity-on is-soft-pity-on]))

  (define pools (list normal-spirits-pool
                      special-spirits-pool
                      limited-spirits-pool
                      crazy-spirits-pool
                      surprise-spirits-pool
                      normal-ancient-pool
                      special-ancient-pool
                      normal-divine-pool
                      special-divine-pool
                      crazy-divine-pool))
  pools)

(define (test-hard-pity-exact)
  (printf "test-hard-pity-exact\n")
  (define pools (create-pools #f))
  (printf "口口口口召唤 (5星领主 5星普通 4星领主 4星普通 3星领主 3星普通 2星普通)\n")
  (printf "probability\n")
  (for ([pool pools])
    (let ((probs (for/list ([rarity (get-field rarities pool)])
                   (rarity-probability rarity))))
      (printf "~a ~a\n" (get-field name pool) probs)))
  (printf "probability exact?\n")
  (for ([pool pools])
    (let ((probs (for/list ([rarity (get-field rarities pool)])
                   (rarity-probability rarity))))
      (printf "~a ~a\n" (get-field name pool) (map exact? probs))))
  
  (printf "call update-rarities-for-hard-pity\n")
  (printf "probability\n")
  (for ([pool pools])
    (send pool update-rarities-for-hard-pity)
    (let ((probs (for/list ([rarity (get-field rarities pool)])
                   (rarity-probability rarity))))
      (printf "~a ~a\n" (get-field name pool) probs)))
  (printf "probability exact?\n")
  (for ([pool pools])
    (let ((probs (for/list ([rarity (get-field rarities pool)])
                   (rarity-probability rarity))))
      (printf "~a ~a\n" (get-field name pool) (map exact? probs))))
  (flush-output))

(define (test-soft-pity-exact)
  (printf "test-soft-pity-exact\n")
  (define pools (create-pools #t))
  (printf "口口口口召唤 (5星领主 5星普通 4星领主 4星普通 3星领主 3星普通 2星普通)\n")
  (printf "probability\n")
  (for ([pool pools])
    (let ((probs (for/list ([rarity (get-field rarities pool)])
                   (rarity-probability rarity))))
      (printf "~a ~a\n" (get-field name pool) probs)))
  (printf "probability exact?\n")
  (for ([pool pools])
    (let ((probs (for/list ([rarity (get-field rarities pool)])
                   (rarity-probability rarity))))
      (printf "~a ~a\n" (get-field name pool) (map exact? probs))))

  (for ([i (in-range 1 3)])    
    (printf "call update-rarities-for-soft-pity ~a\n" i)
    (printf "probability\n")
    (for ([pool pools])
      (send pool update-rarities-for-soft-pity i)
      (let ((probs (for/list ([rarity (get-field rarities pool)])
                     (rarity-probability rarity))))
        (printf "~a ~a\n" (get-field name pool) probs)))
    (printf "probability exact?\n")
    (for ([pool pools])
      (let ((probs (for/list ([rarity (get-field rarities pool)])
                     (rarity-probability rarity))))
        (printf "~a ~a\n" (get-field name pool) (map exact? probs)))))
  (flush-output))


(define (test-soft-pity-update-rarities)
  (printf "test-soft-pity-update-rarities\n")
  (define pools (create-pools #t))
  (printf "口口口口召唤 (5星领主 5星普通 4星领主 4星普通 3星领主 3星普通 2星普通)\n")
  
  (printf "probability\n")
  (for ([pool pools])
    (let ((probs (for/list ([rarity (get-field rarities pool)])
                   (rarity-probability rarity))))
      (printf "~a ~a\n" (get-field name pool) (map exact->inexact probs))))
  
  (printf "cumulative\n")
  (for ([pool pools])
    (let* ((rarities (get-field rarities pool))
           (cumulative (send pool build-cumulative rarities)))
      (printf "~a ~a\n" (get-field name pool) (map exact->inexact cumulative))
      ))
  ;; 软保底先于硬保底达到 100%
  ;; 比如：远古池是从 185 抽开始，每抽5星领主概率提升8%
  ;; 从 186 到 200 共有 15 次机会，每次增加 8%。
  ;; 在第 198 抽时（触发第 13 次软保底时），5星领主英雄的概率已经超过 100%，其他品质英雄的概率都为 0
  ;; （此时，5星领主英雄的概率 1.048=(13*0.08)+0.008），因此我们有理由在 [0, 1.048) 中选取，而非 [0, 1)。
  ;; 更极端的情况，比如：神圣池（已普通神圣池为例），是从 12 抽开始，每抽5星英雄概率提升5%
  ;; 从 13 到 20 共有 8 次机会，每次增加 5%。
  ;; 显然，第 20 抽时，还不足以让 5星英雄的概率达到 100%，但为了更好的容错，我们处理这种情况。
  ;; 假设没有硬保底，在第 31 抽时（触发第 19 次软保底时），5星英雄的概率超过了 100%，其他品质英雄的概率都为 0
  ;; （此时，5星英雄的概率 1.01=(19*0.05)+0.004+0.056），但5星领主和5星普通英雄的概率仍然要维持原来的比例
  ;; （事实上，此时 5星领主的概率是 0.06733333333333333，5星普通的概率是 0.9426666666666667）。
  (for ([i (in-range 1 20)]) ; 注意 i = 13 和 i=19
    (printf "call update-rarities-for-soft-pity ~a\n" i)
    (printf "probability\n")
    (for ([pool pools])
      (send pool update-rarities-for-soft-pity i)
      (let ((probs (for/list ([rarity (get-field rarities pool)])
                     (rarity-probability rarity))))
        (printf "~a ~a\n" (get-field name pool) (map exact->inexact probs))))
    (printf "cumulative\n")
    (for ([pool pools])
      (let* ((rarities (get-field rarities pool))
             (cumulative (send pool build-cumulative rarities)))
        (printf "~a ~a\n" (get-field name pool) (map exact->inexact cumulative))
        )))
  
  (flush-output))

;; (test-hard-pity-exact)

;; (test-soft-pity-exact)

;; (test-soft-pity-update-rarities)
;; test-soft-pity-update-rarities
;; 口口口口召唤 (5星领主 5星普通 4星领主 4星普通 3星领主 3星普通 2星普通)
;; probability
;; 普通英灵召唤 (0.0004 0.0046 0.0012 0.0788 0.0399 0.3751 0.5)
;; 特定英灵召唤 (0.0004 0.0046 0.0012 0.0788 0.0399 0.3751 0.5)
;; 限定英灵召唤 (0.0004 0.0046 0.0012 0.0788 0.0399 0.3751 0.5)
;; 狂欢英灵召唤 (0.0008 0.0092 0.0012 0.0788 0.0399 0.3751 0.495)
;; 惊喜英灵召唤 (0.0004 0.0046 0.0012 0.0788 0.0399 0.3751 0.5)
;; 普通远古召唤 (0.008 0.01 0.06 0.05 0.27 0.602)
;; 特定远古召唤 (0.008 0.01 0.06 0.05 0.27 0.602)
;; 普通神圣召唤 (0.004 0.056 0.0122 0.9278)
;; 特定神圣召唤 (0.004 0.056 0.0122 0.9278)
;; 狂欢神圣召唤 (0.008 0.112 0.0116 0.8684)
;; cumulative
;; 普通英灵召唤 (0.0004 0.005 0.0062 0.085 0.1249 0.5 1.0)
;; 特定英灵召唤 (0.0004 0.005 0.0062 0.085 0.1249 0.5 1.0)
;; 限定英灵召唤 (0.0004 0.005 0.0062 0.085 0.1249 0.5 1.0)
;; 狂欢英灵召唤 (0.0008 0.01 0.0112 0.09 0.1299 0.505 1.0)
;; 惊喜英灵召唤 (0.0004 0.005 0.0062 0.085 0.1249 0.5 1.0)
;; 普通远古召唤 (0.008 0.018 0.078 0.128 0.398 1.0)
;; 特定远古召唤 (0.008 0.018 0.078 0.128 0.398 1.0)
;; 普通神圣召唤 (0.004 0.06 0.0722 1.0)
;; 特定神圣召唤 (0.004 0.06 0.0722 1.0)
;; 狂欢神圣召唤 (0.008 0.12 0.1316 1.0)
;; call update-rarities-for-soft-pity 1
;; probability
;; 普通英灵召唤 (0.0044 0.0506 0.0011396984924623116 0.07484020100502513 0.03789497487437186 0.35625075376884424 0.4748743718592965)
;; 特定英灵召唤 (0.0044 0.0506 0.0011396984924623116 0.07484020100502513 0.03789497487437186 0.35625075376884424 0.4748743718592965)
;; 限定英灵召唤 (0.0044 0.0506 0.0011396984924623116 0.07484020100502513 0.03789497487437186 0.35625075376884424 0.4748743718592965)
;; 狂欢英灵召唤 (0.0048 0.0552 0.0011393939393939394 0.07482020202020202 0.037884848484848486 0.35615555555555556 0.47)
;; 惊喜英灵召唤 (0.0044 0.0506 0.0011396984924623116 0.07484020100502513 0.03789497487437186 0.35625075376884424 0.4748743718592965)
;; 普通远古召唤 (0.088 0.009193548387096774 0.055161290322580644 0.04596774193548387 0.2482258064516129 0.5534516129032258)
;; 特定远古召唤 (0.088 0.009193548387096774 0.055161290322580644 0.04596774193548387 0.2482258064516129 0.5534516129032258)
;; 普通神圣召唤 (0.007333333333333333 0.10266666666666667 0.011551063829787234 0.8784489361702128)
;; 特定神圣召唤 (0.007333333333333333 0.10266666666666667 0.011551063829787234 0.8784489361702128)
;; 狂欢神圣召唤 (0.011333333333333334 0.15866666666666668 0.010940909090909091 0.8190590909090909)
;; cumulative
;; 普通英灵召唤 (0.0044 0.055 0.05613969849246231 0.13097989949748745 0.1688748743718593 0.5251256281407035 1.0)
;; 特定英灵召唤 (0.0044 0.055 0.05613969849246231 0.13097989949748745 0.1688748743718593 0.5251256281407035 1.0)
;; 限定英灵召唤 (0.0044 0.055 0.05613969849246231 0.13097989949748745 0.1688748743718593 0.5251256281407035 1.0)
;; 狂欢英灵召唤 (0.0048 0.06 0.06113939393939394 0.13595959595959595 0.17384444444444444 0.53 1.0)
;; 惊喜英灵召唤 (0.0044 0.055 0.05613969849246231 0.13097989949748745 0.1688748743718593 0.5251256281407035 1.0)
;; 普通远古召唤 (0.088 0.09719354838709678 0.15235483870967742 0.19832258064516128 0.4465483870967742 1.0)
;; 特定远古召唤 (0.088 0.09719354838709678 0.15235483870967742 0.19832258064516128 0.4465483870967742 1.0)
;; 普通神圣召唤 (0.007333333333333333 0.11 0.12155106382978724 1.0)
;; 特定神圣召唤 (0.007333333333333333 0.11 0.12155106382978724 1.0)
;; 狂欢神圣召唤 (0.011333333333333334 0.17 0.1809409090909091 1.0)
;; call update-rarities-for-soft-pity 2
;; probability
;; 普通英灵召唤 (0.0084 0.0966 0.001079396984924623 0.07088040201005025 0.03588994974874372 0.33740150753768844 0.44974874371859297)
;; 特定英灵召唤 (0.0084 0.0966 0.001079396984924623 0.07088040201005025 0.03588994974874372 0.33740150753768844 0.44974874371859297)
;; 限定英灵召唤 (0.0084 0.0966 0.001079396984924623 0.07088040201005025 0.03588994974874372 0.33740150753768844 0.44974874371859297)
;; 狂欢英灵召唤 (0.0088 0.1012 0.0010787878787878787 0.07084040404040404 0.03586969696969697 0.33721111111111113 0.445)
;; 惊喜英灵召唤 (0.0084 0.0966 0.001079396984924623 0.07088040201005025 0.03588994974874372 0.33740150753768844 0.44974874371859297)
;; 普通远古召唤 (0.168 0.008387096774193548 0.05032258064516129 0.041935483870967745 0.2264516129032258 0.5049032258064516)
;; 特定远古召唤 (0.168 0.008387096774193548 0.05032258064516129 0.041935483870967745 0.2264516129032258 0.5049032258064516)
;; 普通神圣召唤 (0.010666666666666666 0.14933333333333335 0.010902127659574467 0.8290978723404255)
;; 特定神圣召唤 (0.010666666666666666 0.14933333333333335 0.010902127659574467 0.8290978723404255)
;; 狂欢神圣召唤 (0.014666666666666666 0.20533333333333334 0.010281818181818182 0.7697181818181819)
;; cumulative
;; 普通英灵召唤 (0.0084 0.105 0.10607939698492462 0.17695979899497488 0.2128497487437186 0.550251256281407 1.0)
;; 特定英灵召唤 (0.0084 0.105 0.10607939698492462 0.17695979899497488 0.2128497487437186 0.550251256281407 1.0)
;; 限定英灵召唤 (0.0084 0.105 0.10607939698492462 0.17695979899497488 0.2128497487437186 0.550251256281407 1.0)
;; 狂欢英灵召唤 (0.0088 0.11 0.11107878787878787 0.18191919191919192 0.2177888888888889 0.555 1.0)
;; 惊喜英灵召唤 (0.0084 0.105 0.10607939698492462 0.17695979899497488 0.2128497487437186 0.550251256281407 1.0)
;; 普通远古召唤 (0.168 0.17638709677419354 0.22670967741935483 0.26864516129032256 0.49509677419354836 1.0)
;; 特定远古召唤 (0.168 0.17638709677419354 0.22670967741935483 0.26864516129032256 0.49509677419354836 1.0)
;; 普通神圣召唤 (0.010666666666666666 0.16 0.17090212765957447 1.0)
;; 特定神圣召唤 (0.010666666666666666 0.16 0.17090212765957447 1.0)
;; 狂欢神圣召唤 (0.014666666666666666 0.22 0.23028181818181817 1.0)
;; call update-rarities-for-soft-pity 3
;; probability
;; 普通英灵召唤 (0.0124 0.1426 0.0010190954773869347 0.06692060301507538 0.03388492462311558 0.31855226130653264 0.42462311557788945)
;; 特定英灵召唤 (0.0124 0.1426 0.0010190954773869347 0.06692060301507538 0.03388492462311558 0.31855226130653264 0.42462311557788945)
;; 限定英灵召唤 (0.0124 0.1426 0.0010190954773869347 0.06692060301507538 0.03388492462311558 0.31855226130653264 0.42462311557788945)
;; 狂欢英灵召唤 (0.0128 0.1472 0.0010181818181818183 0.06686060606060606 0.03385454545454546 0.31826666666666664 0.42)
;; 惊喜英灵召唤 (0.0124 0.1426 0.0010190954773869347 0.06692060301507538 0.03388492462311558 0.31855226130653264 0.42462311557788945)
;; 普通远古召唤 (0.248 0.007580645161290323 0.04548387096774194 0.03790322580645161 0.2046774193548387 0.4563548387096774)
;; 特定远古召唤 (0.248 0.007580645161290323 0.04548387096774194 0.03790322580645161 0.2046774193548387 0.4563548387096774)
;; 普通神圣召唤 (0.014 0.196 0.010253191489361702 0.7797468085106383)
;; 特定神圣召唤 (0.014 0.196 0.010253191489361702 0.7797468085106383)
;; 狂欢神圣召唤 (0.018 0.252 0.009622727272727272 0.7203772727272727)
;; cumulative
;; 普通英灵召唤 (0.0124 0.155 0.15601909547738693 0.2229396984924623 0.2568246231155779 0.5753768844221105 1.0)
;; 特定英灵召唤 (0.0124 0.155 0.15601909547738693 0.2229396984924623 0.2568246231155779 0.5753768844221105 1.0)
;; 限定英灵召唤 (0.0124 0.155 0.15601909547738693 0.2229396984924623 0.2568246231155779 0.5753768844221105 1.0)
;; 狂欢英灵召唤 (0.0128 0.16 0.1610181818181818 0.22787878787878788 0.2617333333333333 0.58 1.0)
;; 惊喜英灵召唤 (0.0124 0.155 0.15601909547738693 0.2229396984924623 0.2568246231155779 0.5753768844221105 1.0)
;; 普通远古召唤 (0.248 0.2555806451612903 0.30106451612903223 0.33896774193548385 0.5436451612903226 1.0)
;; 特定远古召唤 (0.248 0.2555806451612903 0.30106451612903223 0.33896774193548385 0.5436451612903226 1.0)
;; 普通神圣召唤 (0.014 0.21 0.2202531914893617 1.0)
;; 特定神圣召唤 (0.014 0.21 0.2202531914893617 1.0)
;; 狂欢神圣召唤 (0.018 0.27 0.27962272727272725 1.0)
;; call update-rarities-for-soft-pity 4
;; probability
;; 普通英灵召唤 (0.0164 0.1886 0.0009587939698492463 0.0629608040201005 0.031879899497487436 0.2997030150753769 0.39949748743718594)
;; 特定英灵召唤 (0.0164 0.1886 0.0009587939698492463 0.0629608040201005 0.031879899497487436 0.2997030150753769 0.39949748743718594)
;; 限定英灵召唤 (0.0164 0.1886 0.0009587939698492463 0.0629608040201005 0.031879899497487436 0.2997030150753769 0.39949748743718594)
;; 狂欢英灵召唤 (0.0168 0.1932 0.0009575757575757576 0.06288080808080808 0.03183939393939394 0.2993222222222222 0.395)
;; 惊喜英灵召唤 (0.0164 0.1886 0.0009587939698492463 0.0629608040201005 0.031879899497487436 0.2997030150753769 0.39949748743718594)
;; 普通远古召唤 (0.328 0.0067741935483870966 0.04064516129032258 0.03387096774193549 0.1829032258064516 0.40780645161290324)
;; 特定远古召唤 (0.328 0.0067741935483870966 0.04064516129032258 0.03387096774193549 0.1829032258064516 0.40780645161290324)
;; 普通神圣召唤 (0.017333333333333333 0.24266666666666667 0.009604255319148935 0.7303957446808511)
;; 特定神圣召唤 (0.017333333333333333 0.24266666666666667 0.009604255319148935 0.7303957446808511)
;; 狂欢神圣召唤 (0.021333333333333333 0.2986666666666667 0.008963636363636363 0.6710363636363637)
;; cumulative
;; 普通英灵召唤 (0.0164 0.205 0.20595879396984926 0.26891959798994974 0.3007994974874372 0.6005025125628141 1.0)
;; 特定英灵召唤 (0.0164 0.205 0.20595879396984926 0.26891959798994974 0.3007994974874372 0.6005025125628141 1.0)
;; 限定英灵召唤 (0.0164 0.205 0.20595879396984926 0.26891959798994974 0.3007994974874372 0.6005025125628141 1.0)
;; 狂欢英灵召唤 (0.0168 0.21 0.21095757575757576 0.2738383838383838 0.30567777777777777 0.605 1.0)
;; 惊喜英灵召唤 (0.0164 0.205 0.20595879396984926 0.26891959798994974 0.3007994974874372 0.6005025125628141 1.0)
;; 普通远古召唤 (0.328 0.3347741935483871 0.3754193548387097 0.4092903225806452 0.5921935483870968 1.0)
;; 特定远古召唤 (0.328 0.3347741935483871 0.3754193548387097 0.4092903225806452 0.5921935483870968 1.0)
;; 普通神圣召唤 (0.017333333333333333 0.26 0.26960425531914894 1.0)
;; 特定神圣召唤 (0.017333333333333333 0.26 0.26960425531914894 1.0)
;; 狂欢神圣召唤 (0.021333333333333333 0.32 0.32896363636363635 1.0)
;; call update-rarities-for-soft-pity 5
;; probability
;; 普通英灵召唤 (0.0204 0.2346 0.0008984924623115578 0.059001005025125626 0.029874874371859296 0.2808537688442211 0.3743718592964824)
;; 特定英灵召唤 (0.0204 0.2346 0.0008984924623115578 0.059001005025125626 0.029874874371859296 0.2808537688442211 0.3743718592964824)
;; 限定英灵召唤 (0.0204 0.2346 0.0008984924623115578 0.059001005025125626 0.029874874371859296 0.2808537688442211 0.3743718592964824)
;; 狂欢英灵召唤 (0.0208 0.2392 0.000896969696969697 0.0589010101010101 0.029824242424242423 0.2803777777777778 0.37)
;; 惊喜英灵召唤 (0.0204 0.2346 0.0008984924623115578 0.059001005025125626 0.029874874371859296 0.2808537688442211 0.3743718592964824)
;; 普通远古召唤 (0.408 0.005967741935483871 0.035806451612903224 0.029838709677419355 0.16112903225806452 0.359258064516129)
;; 特定远古召唤 (0.408 0.005967741935483871 0.035806451612903224 0.029838709677419355 0.16112903225806452 0.359258064516129)
;; 普通神圣召唤 (0.020666666666666667 0.28933333333333333 0.00895531914893617 0.6810446808510638)
;; 特定神圣召唤 (0.020666666666666667 0.28933333333333333 0.00895531914893617 0.6810446808510638)
;; 狂欢神圣召唤 (0.024666666666666667 0.3453333333333333 0.008304545454545455 0.6216954545454545)
;; cumulative
;; 普通英灵召唤 (0.0204 0.255 0.25589849246231156 0.3148994974874372 0.3447743718592965 0.6256281407035176 1.0)
;; 特定英灵召唤 (0.0204 0.255 0.25589849246231156 0.3148994974874372 0.3447743718592965 0.6256281407035176 1.0)
;; 限定英灵召唤 (0.0204 0.255 0.25589849246231156 0.3148994974874372 0.3447743718592965 0.6256281407035176 1.0)
;; 狂欢英灵召唤 (0.0208 0.26 0.2608969696969697 0.3197979797979798 0.3496222222222222 0.63 1.0)
;; 惊喜英灵召唤 (0.0204 0.255 0.25589849246231156 0.3148994974874372 0.3447743718592965 0.6256281407035176 1.0)
;; 普通远古召唤 (0.408 0.41396774193548386 0.4497741935483871 0.47961290322580646 0.6407419354838709 1.0)
;; 特定远古召唤 (0.408 0.41396774193548386 0.4497741935483871 0.47961290322580646 0.6407419354838709 1.0)
;; 普通神圣召唤 (0.020666666666666667 0.31 0.31895531914893616 1.0)
;; 特定神圣召唤 (0.020666666666666667 0.31 0.31895531914893616 1.0)
;; 狂欢神圣召唤 (0.024666666666666667 0.37 0.37830454545454545 1.0)
;; call update-rarities-for-soft-pity 6
;; probability
;; 普通英灵召唤 (0.0244 0.2806 0.0008381909547738694 0.05504120603015075 0.027869849246231156 0.26200452261306534 0.3492462311557789)
;; 特定英灵召唤 (0.0244 0.2806 0.0008381909547738694 0.05504120603015075 0.027869849246231156 0.26200452261306534 0.3492462311557789)
;; 限定英灵召唤 (0.0244 0.2806 0.0008381909547738694 0.05504120603015075 0.027869849246231156 0.26200452261306534 0.3492462311557789)
;; 狂欢英灵召唤 (0.0248 0.2852 0.0008363636363636364 0.05492121212121212 0.02780909090909091 0.26143333333333335 0.345)
;; 惊喜英灵召唤 (0.0244 0.2806 0.0008381909547738694 0.05504120603015075 0.027869849246231156 0.26200452261306534 0.3492462311557789)
;; 普通远古召唤 (0.488 0.005161290322580645 0.03096774193548387 0.025806451612903226 0.1393548387096774 0.31070967741935485)
;; 特定远古召唤 (0.488 0.005161290322580645 0.03096774193548387 0.025806451612903226 0.1393548387096774 0.31070967741935485)
;; 普通神圣召唤 (0.024 0.336 0.008306382978723404 0.6316936170212766)
;; 特定神圣召唤 (0.024 0.336 0.008306382978723404 0.6316936170212766)
;; 狂欢神圣召唤 (0.028 0.392 0.0076454545454545456 0.5723545454545454)
;; cumulative
;; 普通英灵召唤 (0.0244 0.305 0.3058381909547739 0.3608793969849246 0.38874924623115575 0.6507537688442211 1.0)
;; 特定英灵召唤 (0.0244 0.305 0.3058381909547739 0.3608793969849246 0.38874924623115575 0.6507537688442211 1.0)
;; 限定英灵召唤 (0.0244 0.305 0.3058381909547739 0.3608793969849246 0.38874924623115575 0.6507537688442211 1.0)
;; 狂欢英灵召唤 (0.0248 0.31 0.31083636363636363 0.3657575757575758 0.3935666666666667 0.655 1.0)
;; 惊喜英灵召唤 (0.0244 0.305 0.3058381909547739 0.3608793969849246 0.38874924623115575 0.6507537688442211 1.0)
;; 普通远古召唤 (0.488 0.49316129032258066 0.5241290322580645 0.5499354838709677 0.6892903225806452 1.0)
;; 特定远古召唤 (0.488 0.49316129032258066 0.5241290322580645 0.5499354838709677 0.6892903225806452 1.0)
;; 普通神圣召唤 (0.024 0.36 0.3683063829787234 1.0)
;; 特定神圣召唤 (0.024 0.36 0.3683063829787234 1.0)
;; 狂欢神圣召唤 (0.028 0.42 0.42764545454545455 1.0)
;; call update-rarities-for-soft-pity 7
;; probability
;; 普通英灵召唤 (0.0284 0.3266 0.000777889447236181 0.05108140703517588 0.025864824120603015 0.24315527638190954 0.3241206030150754)
;; 特定英灵召唤 (0.0284 0.3266 0.000777889447236181 0.05108140703517588 0.025864824120603015 0.24315527638190954 0.3241206030150754)
;; 限定英灵召唤 (0.0284 0.3266 0.000777889447236181 0.05108140703517588 0.025864824120603015 0.24315527638190954 0.3241206030150754)
;; 狂欢英灵召唤 (0.0288 0.3312 0.0007757575757575758 0.05094141414141414 0.025793939393939393 0.2424888888888889 0.32)
;; 惊喜英灵召唤 (0.0284 0.3266 0.000777889447236181 0.05108140703517588 0.025864824120603015 0.24315527638190954 0.3241206030150754)
;; 普通远古召唤 (0.568 0.004354838709677419 0.026129032258064518 0.021774193548387097 0.11758064516129033 0.2621612903225806)
;; 特定远古召唤 (0.568 0.004354838709677419 0.026129032258064518 0.021774193548387097 0.11758064516129033 0.2621612903225806)
;; 普通神圣召唤 (0.027333333333333334 0.38266666666666665 0.007657446808510639 0.5823425531914893)
;; 特定神圣召唤 (0.027333333333333334 0.38266666666666665 0.007657446808510639 0.5823425531914893)
;; 狂欢神圣召唤 (0.03133333333333333 0.43866666666666665 0.006986363636363636 0.5230136363636364)
;; cumulative
;; 普通英灵召唤 (0.0284 0.355 0.3557778894472362 0.40685929648241204 0.43272412060301507 0.6758793969849246 1.0)
;; 特定英灵召唤 (0.0284 0.355 0.3557778894472362 0.40685929648241204 0.43272412060301507 0.6758793969849246 1.0)
;; 限定英灵召唤 (0.0284 0.355 0.3557778894472362 0.40685929648241204 0.43272412060301507 0.6758793969849246 1.0)
;; 狂欢英灵召唤 (0.0288 0.36 0.3607757575757576 0.4117171717171717 0.43751111111111113 0.68 1.0)
;; 惊喜英灵召唤 (0.0284 0.355 0.3557778894472362 0.40685929648241204 0.43272412060301507 0.6758793969849246 1.0)
;; 普通远古召唤 (0.568 0.5723548387096774 0.5984838709677419 0.6202580645161291 0.7378387096774194 1.0)
;; 特定远古召唤 (0.568 0.5723548387096774 0.5984838709677419 0.6202580645161291 0.7378387096774194 1.0)
;; 普通神圣召唤 (0.027333333333333334 0.41 0.41765744680851064 1.0)
;; 特定神圣召唤 (0.027333333333333334 0.41 0.41765744680851064 1.0)
;; 狂欢神圣召唤 (0.03133333333333333 0.47 0.47698636363636365 1.0)
;; call update-rarities-for-soft-pity 8
;; probability
;; 普通英灵召唤 (0.0324 0.3726 0.0007175879396984924 0.047121608040201005 0.023859798994974875 0.22430603015075376 0.2989949748743719)
;; 特定英灵召唤 (0.0324 0.3726 0.0007175879396984924 0.047121608040201005 0.023859798994974875 0.22430603015075376 0.2989949748743719)
;; 限定英灵召唤 (0.0324 0.3726 0.0007175879396984924 0.047121608040201005 0.023859798994974875 0.22430603015075376 0.2989949748743719)
;; 狂欢英灵召唤 (0.0328 0.3772 0.0007151515151515151 0.04696161616161616 0.02377878787878788 0.22354444444444443 0.295)
;; 惊喜英灵召唤 (0.0324 0.3726 0.0007175879396984924 0.047121608040201005 0.023859798994974875 0.22430603015075376 0.2989949748743719)
;; 普通远古召唤 (0.648 0.0035483870967741938 0.02129032258064516 0.017741935483870968 0.09580645161290323 0.21361290322580645)
;; 特定远古召唤 (0.648 0.0035483870967741938 0.02129032258064516 0.017741935483870968 0.09580645161290323 0.21361290322580645)
;; 普通神圣召唤 (0.030666666666666665 0.42933333333333334 0.007008510638297872 0.5329914893617022)
;; 特定神圣召唤 (0.030666666666666665 0.42933333333333334 0.007008510638297872 0.5329914893617022)
;; 狂欢神圣召唤 (0.034666666666666665 0.48533333333333334 0.006327272727272727 0.47367272727272725)
;; cumulative
;; 普通英灵召唤 (0.0324 0.405 0.4057175879396985 0.4528391959798995 0.4766989949748744 0.7010050251256281 1.0)
;; 特定英灵召唤 (0.0324 0.405 0.4057175879396985 0.4528391959798995 0.4766989949748744 0.7010050251256281 1.0)
;; 限定英灵召唤 (0.0324 0.405 0.4057175879396985 0.4528391959798995 0.4766989949748744 0.7010050251256281 1.0)
;; 狂欢英灵召唤 (0.0328 0.41 0.41071515151515153 0.4576767676767677 0.4814555555555556 0.705 1.0)
;; 惊喜英灵召唤 (0.0324 0.405 0.4057175879396985 0.4528391959798995 0.4766989949748744 0.7010050251256281 1.0)
;; 普通远古召唤 (0.648 0.6515483870967742 0.6728387096774193 0.6905806451612904 0.7863870967741935 1.0)
;; 特定远古召唤 (0.648 0.6515483870967742 0.6728387096774193 0.6905806451612904 0.7863870967741935 1.0)
;; 普通神圣召唤 (0.030666666666666665 0.46 0.46700851063829785 1.0)
;; 特定神圣召唤 (0.030666666666666665 0.46 0.46700851063829785 1.0)
;; 狂欢神圣召唤 (0.034666666666666665 0.52 0.5263272727272728 1.0)
;; call update-rarities-for-soft-pity 9
;; probability
;; 普通英灵召唤 (0.0364 0.4186 0.000657286432160804 0.04316180904522613 0.021854773869346734 0.20545678391959799 0.27386934673366836)
;; 特定英灵召唤 (0.0364 0.4186 0.000657286432160804 0.04316180904522613 0.021854773869346734 0.20545678391959799 0.27386934673366836)
;; 限定英灵召唤 (0.0364 0.4186 0.000657286432160804 0.04316180904522613 0.021854773869346734 0.20545678391959799 0.27386934673366836)
;; 狂欢英灵召唤 (0.0368 0.4232 0.0006545454545454545 0.042981818181818184 0.021763636363636363 0.2046 0.27)
;; 惊喜英灵召唤 (0.0364 0.4186 0.000657286432160804 0.04316180904522613 0.021854773869346734 0.20545678391959799 0.27386934673366836)
;; 普通远古召唤 (0.728 0.0027419354838709676 0.016451612903225808 0.013709677419354839 0.07403225806451613 0.16506451612903225)
;; 特定远古召唤 (0.728 0.0027419354838709676 0.016451612903225808 0.013709677419354839 0.07403225806451613 0.16506451612903225)
;; 普通神圣召唤 (0.034 0.476 0.006359574468085106 0.4836404255319149)
;; 特定神圣召唤 (0.034 0.476 0.006359574468085106 0.4836404255319149)
;; 狂欢神圣召唤 (0.038 0.532 0.005668181818181818 0.4243318181818182)
;; cumulative
;; 普通英灵召唤 (0.0364 0.455 0.4556572864321608 0.49881909547738695 0.5206738693467337 0.7261306532663316 1.0)
;; 特定英灵召唤 (0.0364 0.455 0.4556572864321608 0.49881909547738695 0.5206738693467337 0.7261306532663316 1.0)
;; 限定英灵召唤 (0.0364 0.455 0.4556572864321608 0.49881909547738695 0.5206738693467337 0.7261306532663316 1.0)
;; 狂欢英灵召唤 (0.0368 0.46 0.4606545454545454 0.5036363636363637 0.5254 0.73 1.0)
;; 惊喜英灵召唤 (0.0364 0.455 0.4556572864321608 0.49881909547738695 0.5206738693467337 0.7261306532663316 1.0)
;; 普通远古召唤 (0.728 0.730741935483871 0.7471935483870967 0.7609032258064516 0.8349354838709677 1.0)
;; 特定远古召唤 (0.728 0.730741935483871 0.7471935483870967 0.7609032258064516 0.8349354838709677 1.0)
;; 普通神圣召唤 (0.034 0.51 0.5163595744680851 1.0)
;; 特定神圣召唤 (0.034 0.51 0.5163595744680851 1.0)
;; 狂欢神圣召唤 (0.038 0.57 0.5756681818181818 1.0)
;; call update-rarities-for-soft-pity 10
;; probability
;; 普通英灵召唤 (0.0404 0.4646 0.0005969849246231155 0.03920201005025126 0.019849748743718594 0.1866075376884422 0.24874371859296482)
;; 特定英灵召唤 (0.0404 0.4646 0.0005969849246231155 0.03920201005025126 0.019849748743718594 0.1866075376884422 0.24874371859296482)
;; 限定英灵召唤 (0.0404 0.4646 0.0005969849246231155 0.03920201005025126 0.019849748743718594 0.1866075376884422 0.24874371859296482)
;; 狂欢英灵召唤 (0.0408 0.4692 0.0005939393939393939 0.039002020202020204 0.01974848484848485 0.18565555555555555 0.245)
;; 惊喜英灵召唤 (0.0404 0.4646 0.0005969849246231155 0.03920201005025126 0.019849748743718594 0.1866075376884422 0.24874371859296482)
;; 普通远古召唤 (0.808 0.001935483870967742 0.011612903225806452 0.00967741935483871 0.052258064516129035 0.11651612903225807)
;; 特定远古召唤 (0.808 0.001935483870967742 0.011612903225806452 0.00967741935483871 0.052258064516129035 0.11651612903225807)
;; 普通神圣召唤 (0.037333333333333336 0.5226666666666666 0.00571063829787234 0.4342893617021277)
;; 特定神圣召唤 (0.037333333333333336 0.5226666666666666 0.00571063829787234 0.4342893617021277)
;; 狂欢神圣召唤 (0.04133333333333333 0.5786666666666667 0.005009090909090909 0.3749909090909091)
;; cumulative
;; 普通英灵召唤 (0.0404 0.505 0.5055969849246231 0.5447989949748744 0.564648743718593 0.7512562814070352 1.0)
;; 特定英灵召唤 (0.0404 0.505 0.5055969849246231 0.5447989949748744 0.564648743718593 0.7512562814070352 1.0)
;; 限定英灵召唤 (0.0404 0.505 0.5055969849246231 0.5447989949748744 0.564648743718593 0.7512562814070352 1.0)
;; 狂欢英灵召唤 (0.0408 0.51 0.5105939393939394 0.5495959595959596 0.5693444444444444 0.755 1.0)
;; 惊喜英灵召唤 (0.0404 0.505 0.5055969849246231 0.5447989949748744 0.564648743718593 0.7512562814070352 1.0)
;; 普通远古召唤 (0.808 0.8099354838709677 0.8215483870967742 0.8312258064516129 0.883483870967742 1.0)
;; 特定远古召唤 (0.808 0.8099354838709677 0.8215483870967742 0.8312258064516129 0.883483870967742 1.0)
;; 普通神圣召唤 (0.037333333333333336 0.56 0.5657106382978724 1.0)
;; 特定神圣召唤 (0.037333333333333336 0.56 0.5657106382978724 1.0)
;; 狂欢神圣召唤 (0.04133333333333333 0.62 0.625009090909091 1.0)
;; call update-rarities-for-soft-pity 11
;; probability
;; 普通英灵召唤 (0.0444 0.5106 0.0005366834170854271 0.03524221105527638 0.017844723618090454 0.16775829145728643 0.2236180904522613)
;; 特定英灵召唤 (0.0444 0.5106 0.0005366834170854271 0.03524221105527638 0.017844723618090454 0.16775829145728643 0.2236180904522613)
;; 限定英灵召唤 (0.0444 0.5106 0.0005366834170854271 0.03524221105527638 0.017844723618090454 0.16775829145728643 0.2236180904522613)
;; 狂欢英灵召唤 (0.0448 0.5152 0.0005333333333333334 0.035022222222222225 0.017733333333333334 0.16671111111111112 0.22)
;; 惊喜英灵召唤 (0.0444 0.5106 0.0005366834170854271 0.03524221105527638 0.017844723618090454 0.16775829145728643 0.2236180904522613)
;; 普通远古召唤 (0.888 0.0011290322580645162 0.0067741935483870966 0.00564516129032258 0.030483870967741935 0.06796774193548387)
;; 特定远古召唤 (0.888 0.0011290322580645162 0.0067741935483870966 0.00564516129032258 0.030483870967741935 0.06796774193548387)
;; 普通神圣召唤 (0.04066666666666666 0.5693333333333334 0.005061702127659574 0.3849382978723404)
;; 特定神圣召唤 (0.04066666666666666 0.5693333333333334 0.005061702127659574 0.3849382978723404)
;; 狂欢神圣召唤 (0.04466666666666667 0.6253333333333333 0.00435 0.32565)
;; cumulative
;; 普通英灵召唤 (0.0444 0.555 0.5555366834170854 0.5907788944723618 0.6086236180904523 0.7763819095477387 1.0)
;; 特定英灵召唤 (0.0444 0.555 0.5555366834170854 0.5907788944723618 0.6086236180904523 0.7763819095477387 1.0)
;; 限定英灵召唤 (0.0444 0.555 0.5555366834170854 0.5907788944723618 0.6086236180904523 0.7763819095477387 1.0)
;; 狂欢英灵召唤 (0.0448 0.56 0.5605333333333333 0.5955555555555555 0.6132888888888889 0.78 1.0)
;; 惊喜英灵召唤 (0.0444 0.555 0.5555366834170854 0.5907788944723618 0.6086236180904523 0.7763819095477387 1.0)
;; 普通远古召唤 (0.888 0.8891290322580645 0.8959032258064517 0.9015483870967742 0.9320322580645162 1.0)
;; 特定远古召唤 (0.888 0.8891290322580645 0.8959032258064517 0.9015483870967742 0.9320322580645162 1.0)
;; 普通神圣召唤 (0.04066666666666666 0.61 0.6150617021276595 1.0)
;; 特定神圣召唤 (0.04066666666666666 0.61 0.6150617021276595 1.0)
;; 狂欢神圣召唤 (0.04466666666666667 0.67 0.67435 1.0)
;; call update-rarities-for-soft-pity 12
;; probability
;; 普通英灵召唤 (0.0484 0.5566 0.00047638190954773867 0.03128241206030151 0.015839698492462313 0.14890904522613066 0.1984924623115578)
;; 特定英灵召唤 (0.0484 0.5566 0.00047638190954773867 0.03128241206030151 0.015839698492462313 0.14890904522613066 0.1984924623115578)
;; 限定英灵召唤 (0.0484 0.5566 0.00047638190954773867 0.03128241206030151 0.015839698492462313 0.14890904522613066 0.1984924623115578)
;; 狂欢英灵召唤 (0.0488 0.5612 0.0004727272727272727 0.031042424242424243 0.01571818181818182 0.14776666666666666 0.195)
;; 惊喜英灵召唤 (0.0484 0.5566 0.00047638190954773867 0.03128241206030151 0.015839698492462313 0.14890904522613066 0.1984924623115578)
;; 普通远古召唤 (0.968 0.0003225806451612903 0.001935483870967742 0.0016129032258064516 0.008709677419354838 0.019419354838709678)
;; 特定远古召唤 (0.968 0.0003225806451612903 0.001935483870967742 0.0016129032258064516 0.008709677419354838 0.019419354838709678)
;; 普通神圣召唤 (0.044 0.616 0.004412765957446808 0.3355872340425532)
;; 特定神圣召唤 (0.044 0.616 0.004412765957446808 0.3355872340425532)
;; 狂欢神圣召唤 (0.048 0.672 0.003690909090909091 0.2763090909090909)
;; cumulative
;; 普通英灵召唤 (0.0484 0.605 0.6054763819095478 0.6367587939698492 0.6525984924623116 0.8015075376884422 1.0)
;; 特定英灵召唤 (0.0484 0.605 0.6054763819095478 0.6367587939698492 0.6525984924623116 0.8015075376884422 1.0)
;; 限定英灵召唤 (0.0484 0.605 0.6054763819095478 0.6367587939698492 0.6525984924623116 0.8015075376884422 1.0)
;; 狂欢英灵召唤 (0.0488 0.61 0.6104727272727273 0.6415151515151515 0.6572333333333333 0.805 1.0)
;; 惊喜英灵召唤 (0.0484 0.605 0.6054763819095478 0.6367587939698492 0.6525984924623116 0.8015075376884422 1.0)
;; 普通远古召唤 (0.968 0.9683225806451613 0.9702580645161291 0.9718709677419355 0.9805806451612903 1.0)
;; 特定远古召唤 (0.968 0.9683225806451613 0.9702580645161291 0.9718709677419355 0.9805806451612903 1.0)
;; 普通神圣召唤 (0.044 0.66 0.6644127659574468 1.0)
;; 特定神圣召唤 (0.044 0.66 0.6644127659574468 1.0)
;; 狂欢神圣召唤 (0.048 0.72 0.723690909090909 1.0)
;; call update-rarities-for-soft-pity 13
;; probability
;; 普通英灵召唤 (0.0524 0.6026 0.00041608040201005024 0.027322613065326632 0.013834673366834171 0.13005979899497488 0.17336683417085427)
;; 特定英灵召唤 (0.0524 0.6026 0.00041608040201005024 0.027322613065326632 0.013834673366834171 0.13005979899497488 0.17336683417085427)
;; 限定英灵召唤 (0.0524 0.6026 0.00041608040201005024 0.027322613065326632 0.013834673366834171 0.13005979899497488 0.17336683417085427)
;; 狂欢英灵召唤 (0.0528 0.6072 0.00041212121212121214 0.027062626262626264 0.013703030303030304 0.12882222222222223 0.17)
;; 惊喜英灵召唤 (0.0524 0.6026 0.00041608040201005024 0.027322613065326632 0.013834673366834171 0.13005979899497488 0.17336683417085427)
;; 普通远古召唤 (1.048 0.0 0.0 0.0 0.0 0.0)
;; 特定远古召唤 (1.048 0.0 0.0 0.0 0.0 0.0)
;; 普通神圣召唤 (0.04733333333333333 0.6626666666666666 0.0037638297872340425 0.286236170212766)
;; 特定神圣召唤 (0.04733333333333333 0.6626666666666666 0.0037638297872340425 0.286236170212766)
;; 狂欢神圣召唤 (0.051333333333333335 0.7186666666666667 0.003031818181818182 0.22696818181818182)
;; cumulative
;; 普通英灵召唤 (0.0524 0.655 0.65541608040201 0.6827386934673367 0.6965733668341708 0.8266331658291457 1.0)
;; 特定英灵召唤 (0.0524 0.655 0.65541608040201 0.6827386934673367 0.6965733668341708 0.8266331658291457 1.0)
;; 限定英灵召唤 (0.0524 0.655 0.65541608040201 0.6827386934673367 0.6965733668341708 0.8266331658291457 1.0)
;; 狂欢英灵召唤 (0.0528 0.66 0.6604121212121212 0.6874747474747475 0.7011777777777778 0.83 1.0)
;; 惊喜英灵召唤 (0.0524 0.655 0.65541608040201 0.6827386934673367 0.6965733668341708 0.8266331658291457 1.0)
;; 普通远古召唤 (1.048 1.048 1.048 1.048 1.048 1.048)
;; 特定远古召唤 (1.048 1.048 1.048 1.048 1.048 1.048)
;; 普通神圣召唤 (0.04733333333333333 0.71 0.7137638297872341 1.0)
;; 特定神圣召唤 (0.04733333333333333 0.71 0.7137638297872341 1.0)
;; 狂欢神圣召唤 (0.051333333333333335 0.77 0.7730318181818182 1.0)
;; call update-rarities-for-soft-pity 14
;; probability
;; 普通英灵召唤 (0.0564 0.6486 0.0003557788944723618 0.023362814070351758 0.01182964824120603 0.1112105527638191 0.14824120603015076)
;; 特定英灵召唤 (0.0564 0.6486 0.0003557788944723618 0.023362814070351758 0.01182964824120603 0.1112105527638191 0.14824120603015076)
;; 限定英灵召唤 (0.0564 0.6486 0.0003557788944723618 0.023362814070351758 0.01182964824120603 0.1112105527638191 0.14824120603015076)
;; 狂欢英灵召唤 (0.0568 0.6532 0.0003515151515151515 0.02308282828282828 0.011687878787878787 0.10987777777777778 0.145)
;; 惊喜英灵召唤 (0.0564 0.6486 0.0003557788944723618 0.023362814070351758 0.01182964824120603 0.1112105527638191 0.14824120603015076)
;; 普通远古召唤 (1.128 0.0 0.0 0.0 0.0 0.0)
;; 特定远古召唤 (1.128 0.0 0.0 0.0 0.0 0.0)
;; 普通神圣召唤 (0.050666666666666665 0.7093333333333334 0.0031148936170212766 0.23688510638297872)
;; 特定神圣召唤 (0.050666666666666665 0.7093333333333334 0.0031148936170212766 0.23688510638297872)
;; 狂欢神圣召唤 (0.05466666666666667 0.7653333333333333 0.002372727272727273 0.17762727272727272)
;; cumulative
;; 普通英灵召唤 (0.0564 0.705 0.7053557788944723 0.7287185929648241 0.7405482412060301 0.8517587939698492 1.0)
;; 特定英灵召唤 (0.0564 0.705 0.7053557788944723 0.7287185929648241 0.7405482412060301 0.8517587939698492 1.0)
;; 限定英灵召唤 (0.0564 0.705 0.7053557788944723 0.7287185929648241 0.7405482412060301 0.8517587939698492 1.0)
;; 狂欢英灵召唤 (0.0568 0.71 0.7103515151515152 0.7334343434343434 0.7451222222222222 0.855 1.0)
;; 惊喜英灵召唤 (0.0564 0.705 0.7053557788944723 0.7287185929648241 0.7405482412060301 0.8517587939698492 1.0)
;; 普通远古召唤 (1.128 1.128 1.128 1.128 1.128 1.128)
;; 特定远古召唤 (1.128 1.128 1.128 1.128 1.128 1.128)
;; 普通神圣召唤 (0.050666666666666665 0.76 0.7631148936170212 1.0)
;; 特定神圣召唤 (0.050666666666666665 0.76 0.7631148936170212 1.0)
;; 狂欢神圣召唤 (0.05466666666666667 0.82 0.8223727272727273 1.0)
;; call update-rarities-for-soft-pity 15
;; probability
;; 普通英灵召唤 (0.0604 0.6946 0.00029547738693467337 0.019403015075376884 0.009824623115577889 0.09236130653266332 0.12311557788944724)
;; 特定英灵召唤 (0.0604 0.6946 0.00029547738693467337 0.019403015075376884 0.009824623115577889 0.09236130653266332 0.12311557788944724)
;; 限定英灵召唤 (0.0604 0.6946 0.00029547738693467337 0.019403015075376884 0.009824623115577889 0.09236130653266332 0.12311557788944724)
;; 狂欢英灵召唤 (0.0608 0.6992 0.0002909090909090909 0.019103030303030302 0.009672727272727272 0.09093333333333334 0.12)
;; 惊喜英灵召唤 (0.0604 0.6946 0.00029547738693467337 0.019403015075376884 0.009824623115577889 0.09236130653266332 0.12311557788944724)
;; 普通远古召唤 (1.208 0.0 0.0 0.0 0.0 0.0)
;; 特定远古召唤 (1.208 0.0 0.0 0.0 0.0 0.0)
;; 普通神圣召唤 (0.054 0.756 0.0024659574468085107 0.18753404255319148)
;; 特定神圣召唤 (0.054 0.756 0.0024659574468085107 0.18753404255319148)
;; 狂欢神圣召唤 (0.058 0.812 0.0017136363636363636 0.12828636363636364)
;; cumulative
;; 普通英灵召唤 (0.0604 0.755 0.7552954773869347 0.7746984924623116 0.7845231155778895 0.8768844221105527 1.0)
;; 特定英灵召唤 (0.0604 0.755 0.7552954773869347 0.7746984924623116 0.7845231155778895 0.8768844221105527 1.0)
;; 限定英灵召唤 (0.0604 0.755 0.7552954773869347 0.7746984924623116 0.7845231155778895 0.8768844221105527 1.0)
;; 狂欢英灵召唤 (0.0608 0.76 0.7602909090909091 0.7793939393939394 0.7890666666666667 0.88 1.0)
;; 惊喜英灵召唤 (0.0604 0.755 0.7552954773869347 0.7746984924623116 0.7845231155778895 0.8768844221105527 1.0)
;; 普通远古召唤 (1.208 1.208 1.208 1.208 1.208 1.208)
;; 特定远古召唤 (1.208 1.208 1.208 1.208 1.208 1.208)
;; 普通神圣召唤 (0.054 0.81 0.8124659574468085 1.0)
;; 特定神圣召唤 (0.054 0.81 0.8124659574468085 1.0)
;; 狂欢神圣召唤 (0.058 0.87 0.8717136363636364 1.0)
;; call update-rarities-for-soft-pity 16
;; probability
;; 普通英灵召唤 (0.0644 0.7406 0.00023517587939698493 0.01544321608040201 0.007819597989949748 0.07351206030150753 0.09798994974874371)
;; 特定英灵召唤 (0.0644 0.7406 0.00023517587939698493 0.01544321608040201 0.007819597989949748 0.07351206030150753 0.09798994974874371)
;; 限定英灵召唤 (0.0644 0.7406 0.00023517587939698493 0.01544321608040201 0.007819597989949748 0.07351206030150753 0.09798994974874371)
;; 狂欢英灵召唤 (0.0648 0.7452 0.0002303030303030303 0.015123232323232323 0.007657575757575758 0.0719888888888889 0.095)
;; 惊喜英灵召唤 (0.0644 0.7406 0.00023517587939698493 0.01544321608040201 0.007819597989949748 0.07351206030150753 0.09798994974874371)
;; 普通远古召唤 (1.288 0.0 0.0 0.0 0.0 0.0)
;; 特定远古召唤 (1.288 0.0 0.0 0.0 0.0 0.0)
;; 普通神圣召唤 (0.05733333333333333 0.8026666666666666 0.0018170212765957446 0.13818297872340427)
;; 特定神圣召唤 (0.05733333333333333 0.8026666666666666 0.0018170212765957446 0.13818297872340427)
;; 狂欢神圣召唤 (0.06133333333333333 0.8586666666666667 0.0010545454545454545 0.07894545454545454)
;; cumulative
;; 普通英灵召唤 (0.0644 0.805 0.805235175879397 0.820678391959799 0.8284979899497488 0.9020100502512562 1.0)
;; 特定英灵召唤 (0.0644 0.805 0.805235175879397 0.820678391959799 0.8284979899497488 0.9020100502512562 1.0)
;; 限定英灵召唤 (0.0644 0.805 0.805235175879397 0.820678391959799 0.8284979899497488 0.9020100502512562 1.0)
;; 狂欢英灵召唤 (0.0648 0.81 0.8102303030303031 0.8253535353535354 0.8330111111111111 0.905 1.0)
;; 惊喜英灵召唤 (0.0644 0.805 0.805235175879397 0.820678391959799 0.8284979899497488 0.9020100502512562 1.0)
;; 普通远古召唤 (1.288 1.288 1.288 1.288 1.288 1.288)
;; 特定远古召唤 (1.288 1.288 1.288 1.288 1.288 1.288)
;; 普通神圣召唤 (0.05733333333333333 0.86 0.8618170212765958 1.0)
;; 特定神圣召唤 (0.05733333333333333 0.86 0.8618170212765958 1.0)
;; 狂欢神圣召唤 (0.06133333333333333 0.92 0.9210545454545455 1.0)
;; call update-rarities-for-soft-pity 17
;; probability
;; 普通英灵召唤 (0.0684 0.7866 0.0001748743718592965 0.011483417085427135 0.005814572864321608 0.054662814070351756 0.0728643216080402)
;; 特定英灵召唤 (0.0684 0.7866 0.0001748743718592965 0.011483417085427135 0.005814572864321608 0.054662814070351756 0.0728643216080402)
;; 限定英灵召唤 (0.0684 0.7866 0.0001748743718592965 0.011483417085427135 0.005814572864321608 0.054662814070351756 0.0728643216080402)
;; 狂欢英灵召唤 (0.0688 0.7912 0.0001696969696969697 0.011143434343434344 0.005642424242424242 0.05304444444444444 0.07)
;; 惊喜英灵召唤 (0.0684 0.7866 0.0001748743718592965 0.011483417085427135 0.005814572864321608 0.054662814070351756 0.0728643216080402)
;; 普通远古召唤 (1.368 0.0 0.0 0.0 0.0 0.0)
;; 特定远古召唤 (1.368 0.0 0.0 0.0 0.0 0.0)
;; 普通神圣召唤 (0.06066666666666667 0.8493333333333334 0.0011680851063829787 0.08883191489361703)
;; 特定神圣召唤 (0.06066666666666667 0.8493333333333334 0.0011680851063829787 0.08883191489361703)
;; 狂欢神圣召唤 (0.06466666666666666 0.9053333333333333 0.00039545454545454546 0.029604545454545453)
;; cumulative
;; 普通英灵召唤 (0.0684 0.855 0.8551748743718594 0.8666582914572865 0.8724728643216081 0.9271356783919598 1.0)
;; 特定英灵召唤 (0.0684 0.855 0.8551748743718594 0.8666582914572865 0.8724728643216081 0.9271356783919598 1.0)
;; 限定英灵召唤 (0.0684 0.855 0.8551748743718594 0.8666582914572865 0.8724728643216081 0.9271356783919598 1.0)
;; 狂欢英灵召唤 (0.0688 0.86 0.8601696969696969 0.8713131313131313 0.8769555555555556 0.93 1.0)
;; 惊喜英灵召唤 (0.0684 0.855 0.8551748743718594 0.8666582914572865 0.8724728643216081 0.9271356783919598 1.0)
;; 普通远古召唤 (1.368 1.368 1.368 1.368 1.368 1.368)
;; 特定远古召唤 (1.368 1.368 1.368 1.368 1.368 1.368)
;; 普通神圣召唤 (0.06066666666666667 0.91 0.911168085106383 1.0)
;; 特定神圣召唤 (0.06066666666666667 0.91 0.911168085106383 1.0)
;; 狂欢神圣召唤 (0.06466666666666666 0.97 0.9703954545454545 1.0)
;; call update-rarities-for-soft-pity 18
;; probability
;; 普通英灵召唤 (0.0724 0.8326 0.00011457286432160805 0.007523618090452261 0.0038095477386934674 0.03581356783919598 0.04773869346733668)
;; 特定英灵召唤 (0.0724 0.8326 0.00011457286432160805 0.007523618090452261 0.0038095477386934674 0.03581356783919598 0.04773869346733668)
;; 限定英灵召唤 (0.0724 0.8326 0.00011457286432160805 0.007523618090452261 0.0038095477386934674 0.03581356783919598 0.04773869346733668)
;; 狂欢英灵召唤 (0.0728 0.8372 0.00010909090909090909 0.007163636363636363 0.0036272727272727272 0.0341 0.045)
;; 惊喜英灵召唤 (0.0724 0.8326 0.00011457286432160805 0.007523618090452261 0.0038095477386934674 0.03581356783919598 0.04773869346733668)
;; 普通远古召唤 (1.448 0.0 0.0 0.0 0.0 0.0)
;; 特定远古召唤 (1.448 0.0 0.0 0.0 0.0 0.0)
;; 普通神圣召唤 (0.064 0.896 0.0005191489361702127 0.039480851063829786)
;; 特定神圣召唤 (0.064 0.896 0.0005191489361702127 0.039480851063829786)
;; 狂欢神圣召唤 (0.068 0.952 0.0 0.0)
;; cumulative
;; 普通英灵召唤 (0.0724 0.905 0.9051145728643216 0.9126381909547738 0.9164477386934673 0.9522613065326633 1.0)
;; 特定英灵召唤 (0.0724 0.905 0.9051145728643216 0.9126381909547738 0.9164477386934673 0.9522613065326633 1.0)
;; 限定英灵召唤 (0.0724 0.905 0.9051145728643216 0.9126381909547738 0.9164477386934673 0.9522613065326633 1.0)
;; 狂欢英灵召唤 (0.0728 0.91 0.9101090909090909 0.9172727272727272 0.9209 0.955 1.0)
;; 惊喜英灵召唤 (0.0724 0.905 0.9051145728643216 0.9126381909547738 0.9164477386934673 0.9522613065326633 1.0)
;; 普通远古召唤 (1.448 1.448 1.448 1.448 1.448 1.448)
;; 特定远古召唤 (1.448 1.448 1.448 1.448 1.448 1.448)
;; 普通神圣召唤 (0.064 0.96 0.9605191489361702 1.0)
;; 特定神圣召唤 (0.064 0.96 0.9605191489361702 1.0)
;; 狂欢神圣召唤 (0.068 1.02 1.02 1.02)
;; call update-rarities-for-soft-pity 19
;; probability
;; 普通英灵召唤 (0.0764 0.8786 5.42713567839196e-5 0.003563819095477387 0.0018045226130653266 0.016964321608040202 0.022613065326633167)
;; 特定英灵召唤 (0.0764 0.8786 5.42713567839196e-5 0.003563819095477387 0.0018045226130653266 0.016964321608040202 0.022613065326633167)
;; 限定英灵召唤 (0.0764 0.8786 5.42713567839196e-5 0.003563819095477387 0.0018045226130653266 0.016964321608040202 0.022613065326633167)
;; 狂欢英灵召唤 (0.0768 0.8832 4.848484848484849e-5 0.003183838383838384 0.001612121212121212 0.015155555555555556 0.02)
;; 惊喜英灵召唤 (0.0764 0.8786 5.42713567839196e-5 0.003563819095477387 0.0018045226130653266 0.016964321608040202 0.022613065326633167)
;; 普通远古召唤 (1.528 0.0 0.0 0.0 0.0 0.0)
;; 特定远古召唤 (1.528 0.0 0.0 0.0 0.0 0.0)
;; 普通神圣召唤 (0.06733333333333333 0.9426666666666667 0.0 0.0)
;; 特定神圣召唤 (0.06733333333333333 0.9426666666666667 0.0 0.0)
;; 狂欢神圣召唤 (0.07133333333333333 0.9986666666666667 0.0 0.0)
;; cumulative
;; 普通英灵召唤 (0.0764 0.955 0.9550542713567839 0.9586180904522613 0.9604226130653266 0.9773869346733668 1.0)
;; 特定英灵召唤 (0.0764 0.955 0.9550542713567839 0.9586180904522613 0.9604226130653266 0.9773869346733668 1.0)
;; 限定英灵召唤 (0.0764 0.955 0.9550542713567839 0.9586180904522613 0.9604226130653266 0.9773869346733668 1.0)
;; 狂欢英灵召唤 (0.0768 0.96 0.9600484848484848 0.9632323232323232 0.9648444444444444 0.98 1.0)
;; 惊喜英灵召唤 (0.0764 0.955 0.9550542713567839 0.9586180904522613 0.9604226130653266 0.9773869346733668 1.0)
;; 普通远古召唤 (1.528 1.528 1.528 1.528 1.528 1.528)
;; 特定远古召唤 (1.528 1.528 1.528 1.528 1.528 1.528)
;; 普通神圣召唤 (0.06733333333333333 1.01 1.01 1.01)
;; 特定神圣召唤 (0.06733333333333333 1.01 1.01 1.01)
;; 狂欢神圣召唤 (0.07133333333333333 1.07 1.07 1.07)
